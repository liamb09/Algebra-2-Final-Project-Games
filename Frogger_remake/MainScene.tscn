[gd_scene load_steps=5 format=2]

[ext_resource path="res://Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Enemy.tscn" type="PackedScene" id=2]
[ext_resource path="res://Log.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

var enemy = load(\"res://Enemy.tscn\")
var player = load(\"res://Player.tscn\")
var Log = load(\"res://Log.tscn\")
var timer2 = 0
var timer1 = 0

func spawn_at_intervals(sprite_path, pos_y, interval_time):
	var timer = 0
	timer += 1
	if timer == interval_time:
		var sprite = load(sprite_path)
		var spriteInstance = sprite.instance()
		spriteInstance.position.y = pos_y
		add_child(spriteInstance)
		timer = 0

func init_at_intervals(sprite, pos_x, pos_y, interval_time):
	while pos_x < get_viewport().size.x:
		var sprite_instnance = sprite.instance()
		sprite_instnance.position.y = pos_y
		sprite_instnance.position.x = pos_x
		add_child(sprite_instnance)
		pos_x += interval_time

func _ready():
	var player_instance = player.instance()
	player_instance.position.x = 400
	player_instance.position.y = 800
	add_child(player_instance)
	init_at_intervals(enemy, 16, 400, 200)
	init_at_intervals(Log, 16, 200, 200)

func _process(delta):
	#spawn_at_intervals(, 400, 200)
	timer1 += 1
	timer2 += 1
	if timer1 == 200:
		var path = \"res://Enemy.tscn\"
		var enemy = load(path)
		var enemyinstance = enemy.instance()
		enemyinstance.position.y = 400
		add_child(enemyinstance)
		timer1 = 0
	if timer2 == 100:
		var path_log = \"res://Log.tscn\"
		var Log = load(path_log)
		var Loginstance = Log.instance()
		Loginstance.position.y = 200
		add_child(Loginstance)
		timer2 = 0
"

[node name="MainScene" type="Node2D"]
script = SubResource( 1 )

[node name="Enemy" parent="." instance=ExtResource( 2 )]
visible = false
position = Vector2( 1520, 168 )

[node name="Player" parent="." instance=ExtResource( 1 )]
visible = false
position = Vector2( 441, 721 )

[node name="Log" parent="." instance=ExtResource( 3 )]
visible = false
position = Vector2( 100, 101 )
